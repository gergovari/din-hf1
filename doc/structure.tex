\newcommand{\mul}{40}

\newcommand{\coordsize}{2pt}
\newcommand{\coordcolor}{red}
\newcommand{\coords}{
	\pgfmathsetmacro{\ABx}{\lthree * sin(\phidegree) * \mul}
	\pgfmathsetmacro{\BCx}{\ltwo * cos(\betadegree) * \mul}
	\pgfmathsetmacro{\BCy}{-\ltwo * sin(\betadegree) * \mul}

	\coordinate (A) at (0, \lthree * \mul);
	\coordinate (B) at ($(A) + (\phidegree:\lthree * \mul)$);
	\coordinate (C) at (\ABx + \BCx, 0);
	\coordinate (D) at ($(C) + (0, -\lone * \mul)$);
        \coordinate (E) at (0, 0);
	\coordinate (S2) at ($ (B)!0.5!(C) $);

	\coordinate (P2) at ($(C) + (0, \CPtwoy)$);
}

\newcommand{\points}{
        \fill[\coordcolor] (A) circle (\coordsize) node[left, color=black] {$A$};
        \fill[\coordcolor] (B) circle (\coordsize) node[above right, color=black] {$B$};
        \fill[\coordcolor] (C) circle (\coordsize) node[below, color=black] {$C$};
        \fill[\coordcolor] (D) circle (\coordsize) node[below, color=black] {$D$};
        \fill[\coordcolor] (E) circle (\coordsize) node[below, color=black] {$E$};
        \fill[\coordcolor] (S2) circle (\coordsize) node[above, color=black] {$S_2$};
}

\newcommand{\beamwidth}{2}
\newcommand{\beamcolor}{black}
\newcommand{\beams}{
	\draw[line width=\beamwidth, \beamcolor] (B) -- (C);
}

\newcommand{\wheelcolor}{gray}
\newcommand{\wheelwidth}{1}
\newcommand{\wheels}{
	\fill[\wheelcolor, opacity=.5] (A) circle (\lthree * \mul);
	\draw[line width=\wheelwidth, \beamcolor] (A) circle (\lthree * \mul);

	\fill[\wheelcolor, opacity=.5] (C) circle (\lone * \mul);
	\draw[line width=\wheelwidth, \beamcolor] (C) circle (\lone * \mul);
}

\newcommand{\structure}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\wheels
			\beams
                        \points
                \end{tikzpicture}
                \caption{Méretarányos szerkezet}
        \end{figure}
}

\newcommand{\speedpolepoint}{\fill[cyan] (P2) circle (\coordsize * 1.5) node[above, color=black] {$P_2$};}
\newcommand{\accelerationpolepoint}{\fill[cyan] (C) circle (\coordsize * 1.5) node[above, color=black] {$G_2$};}

\newcommand{\speedcolor}{purple}
\newcommand{\speedwidth}{1pt}
\newcommand{\smul}{3}
\newcommand{\speeds}{
	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(C) -- ($(C) + (\vcx * \smul, 0)$)
	node[midway, above] {$\pmb{v}_\text{C}$};

	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(B) -- ($(B) + (\vbx * \smul, \vby * \smul)$)
	node[midway, above right] {$\pmb{v}_\text{B}$};

	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(S2) -- ($(S2) + (\vstwox * \smul, \vstwoy * \smul)$)
	node[above] {$\pmb{v}_{S_2}$};
}

\newcommand{\accelcolor}{teal}
\newcommand{\accelwidth}{1pt}
\newcommand{\amul}{1}
\newcommand{\accelerations}{
	\draw[line width=\accelwidth, \accelcolor, -Stealth]
	(B) -- ($(B) + (\abx * \amul, \aby * \amul)$)
	node[midway, right] {$\pmb{a}_\text{B}$};

	\draw[line width=\accelwidth, \accelcolor, -Stealth]
	(S2) -- ($(S2) + (\astwox * \amul, \astwoy * \amul)$)
	node[midway, left] {$\pmb{a}_{S_2}$};
}

\newcommand{\structurespeedpole}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\wheels
			\beams

			\speeds

                        \points
			\speedpolepoint
                \end{tikzpicture}
                \caption{Méretarányos szerkezet sebességpólussal és sebességekkel}
        \end{figure}
}

\newcommand{\structureacceleration}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\wheels
			\beams

			\accelerations

                        \points
                \end{tikzpicture}
                \caption{Méretarányos szerkezet gyorsulásokkal}
        \end{figure}
}

\newcommand{\structureaccelerationpole}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\wheels
			\beams
			
			\speeds
			\accelerations

                        \points
			\accelerationpolepoint
                \end{tikzpicture}
                \caption{Méretarányos szerkezet gyorsuláspólussal, gyorsulásokkal és azok gyorsulásszögével}
        \end{figure}
}
